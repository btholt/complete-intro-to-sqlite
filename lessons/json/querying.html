<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"/><link rel="icon" type="image/x-icon" href="/images/favicon.ico"/><title>JSON – Complete Intro to SQLite</title><meta name="description" content="Learn how to build on SQLite with this quick and complete course with Brian Holt. SQLite is a powerful database that is easy to get started with and is a great tool for building both small and large applications."/><meta name="keywords" content="SQL,SQLite,Databases,Web Development,Node.js,JavaScript,Brian Holt,Frontend Masters"/><meta name="og:description" content="Learn how to build on SQLite with this quick and complete course with Brian Holt. SQLite is a powerful database that is easy to get started with and is a great tool for building both small and large applications."/><meta name="og:title" content="JSON – Complete Intro to SQLite"/><meta name="og:image" content="/images/social-share-cover.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="next-head-count" content="14"/><link data-next-font="size-adjust" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/27123e75b7d47aaa.css" as="style"/><link rel="stylesheet" href="/_next/static/css/27123e75b7d47aaa.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-4e7214a60fad8e88.js" defer=""></script><script src="/_next/static/chunks/framework-ecc4130bc7a58a64.js" defer=""></script><script src="/_next/static/chunks/main-be89c515900796e7.js" defer=""></script><script src="/_next/static/chunks/pages/_app-a9fbd9f7480465a3.js" defer=""></script><script src="/_next/static/chunks/pages/lessons/%5Bsection%5D/%5Bslug%5D-f133ec3e69124099.js" defer=""></script><script src="/_next/static/UVFsG-h6A31FVwYuYsLRa/_buildManifest.js" defer=""></script><script src="/_next/static/UVFsG-h6A31FVwYuYsLRa/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="remix-app"><header class="navbar"><h1 class="navbar-brand"><a href="/">Complete Intro to SQLite</a></h1><div class="navbar-info"><a href="https://frontendmasters.com/workshops/sqlite/" class="cta-btn">Watch on Frontend Masters</a></div></header><div class="content-container"><div class="main"><div class="lesson-container"><div class="lesson"><div class="lesson-content"><p>The JSON extension (<a href="https://sqlite.org/json1.html">json1</a>) for SQLite is the most useful one to me, and one that I load nearly any time I do a project with SQLite. It is extremely useful for application development. It allows you to read and write arbitrary data. It allows you to treat SQLite essentially like a document-based database like MongoDB where you don&#39;t have to define your schema up front and can do so on the fly. It allows you to have arrays inside of rows instead of having to do one-to-many relations across tables. There are still reasons you&#39;d want to define schema and have relations across table, but this makes it easy for simple use cases where you don&#39;t need all the SQL rigor.</p>
<p>Let&#39;s install it.</p>
<pre><code class="hljs language-bash">sqlpkg install sqlite/json1
sqlpkg <span class="hljs-built_in">which</span> sqlite/json1 <span class="hljs-comment"># copy the out output of this</span>
</code></pre><p>Now load your database and run this</p>
<pre><code class="hljs language-sql">.load <span class="hljs-operator">/</span>Users<span class="hljs-operator">/</span>my<span class="hljs-operator">-</span><span class="hljs-keyword">user</span><span class="hljs-operator">/</span>.sqlpkg<span class="hljs-operator">/</span>sqlite<span class="hljs-operator">/</span>json1<span class="hljs-operator">/</span>json1.dylib

<span class="hljs-keyword">SELECT</span> json(<span class="hljs-string">&#x27;{&quot;username&quot;: &quot;btholt&quot;, &quot;favorites&quot;:[&quot;Daft Punk&quot;, &quot;Radiohead&quot;]}&#x27;</span>);
</code></pre><p>This should return back to you a JSON object of the string we passed in. As you can see, we can now operate with JSON inside of SQLite! Pretty cool, right? Let&#39;s try a few more.</p>
<pre><code class="hljs language-sql"><span class="hljs-comment">-- create an array</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">json_array</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);

<span class="hljs-comment">-- get the length of an array</span>
<span class="hljs-keyword">SELECT</span> json_array_length(<span class="hljs-string">&#x27;{&quot;username&quot;: &quot;btholt&quot;, &quot;favorites&quot;:[&quot;Daft Punk&quot;, &quot;Radiohead&quot;]}&#x27;</span>, <span class="hljs-string">&#x27;$.favorites&#x27;</span>);

<span class="hljs-comment">-- get the type of a field in an object</span>
<span class="hljs-keyword">SELECT</span> json_type(<span class="hljs-string">&#x27;{&quot;username&quot;: &quot;btholt&quot;, &quot;favorites&quot;:[&quot;Daft Punk&quot;, &quot;Radiohead&quot;]}&#x27;</span>, <span class="hljs-string">&#x27;$.username&#x27;</span>);

<span class="hljs-comment">-- construct a new object using pairs</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">json_object</span>(<span class="hljs-string">&#x27;username&#x27;</span>, <span class="hljs-string">&#x27;btholt&#x27;</span>, <span class="hljs-string">&#x27;favorites&#x27;</span>, <span class="hljs-built_in">json_array</span>(<span class="hljs-string">&#x27;Daft Punk&#x27;</span>, <span class="hljs-string">&#x27;Radiohead&#x27;</span>));
</code></pre><p>These are a bunch of helper methods to help you interact with JSON objects in SQLite. Let&#39;s see how to manipulate it.</p>
<pre><code class="hljs language-sql"><span class="hljs-comment">-- add a new field</span>
<span class="hljs-keyword">SELECT</span> json_insert(<span class="hljs-string">&#x27;{&quot;username&quot;: &quot;btholt&quot;, &quot;favorites&quot;:[&quot;Daft Punk&quot;, &quot;Radiohead&quot;]}&#x27;</span>, <span class="hljs-string">&#x27;$.city&#x27;</span>, <span class="hljs-string">&#x27;Sacramento&#x27;</span>);

<span class="hljs-comment">-- remove a field</span>
<span class="hljs-keyword">SELECT</span> json_remove(<span class="hljs-string">&#x27;{&quot;username&quot;: &quot;btholt&quot;, &quot;favorites&quot;:[&quot;Daft Punk&quot;, &quot;Radiohead&quot;]}&#x27;</span>, <span class="hljs-string">&#x27;$.favorites&#x27;</span>);

<span class="hljs-comment">-- update a field</span>
<span class="hljs-keyword">SELECT</span> json_replace(<span class="hljs-string">&#x27;{&quot;username&quot;: &quot;btholt&quot;, &quot;favorites&quot;:[&quot;Daft Punk&quot;, &quot;Radiohead&quot;]}&#x27;</span>, <span class="hljs-string">&#x27;$.username&#x27;</span>, <span class="hljs-string">&#x27;holtbt&#x27;</span>);
</code></pre><h2>-&gt; and -&gt;&gt;</h2>
<p>SQLite provides two convenience operators that it copied from MySQL and Postgres to keep the syntaxes compatible. It allows you to extract specific values from JSON.</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">SELECT</span> json(<span class="hljs-string">&#x27;{&quot;username&quot;: &quot;btholt&quot;, &quot;favorites&quot;:[&quot;Daft Punk&quot;, &quot;Radiohead&quot;]}&#x27;</span>) <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-string">&#x27;username&#x27;</span>;
<span class="hljs-keyword">SELECT</span> json(<span class="hljs-string">&#x27;{&quot;username&quot;: &quot;btholt&quot;, &quot;name&quot;: { &quot;first&quot;: &quot;Brian&quot; }, &quot;favorites&quot;:[&quot;Daft Punk&quot;, &quot;Radiohead&quot;]}&#x27;</span>) <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-string">&#x27;name&#x27;</span>;
<span class="hljs-keyword">SELECT</span> json(<span class="hljs-string">&#x27;{&quot;username&quot;: &quot;btholt&quot;, &quot;name&quot;: { &quot;first&quot;: &quot;Brian&quot; }, &quot;favorites&quot;:[&quot;Daft Punk&quot;, &quot;Radiohead&quot;]}&#x27;</span>) <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-string">&#x27;name&#x27;</span> <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-string">&#x27;first&#x27;</span>;
</code></pre><p>Notice you can do multiple levels of extraction. Also notice that anything that coming back from with -&gt; operator has double quotes. That&#39;s because it&#39;s still treating it as JSON so that we can keep using -&gt; to dig further into objects. If we want it to return it as text or integer, we use -&gt;&gt;</p>
<pre><code class="hljs language-sql"><span class="hljs-keyword">SELECT</span> json(<span class="hljs-string">&#x27;{&quot;username&quot;: &quot;btholt&quot;, &quot;name&quot;: { &quot;first&quot;: &quot;Brian&quot; }, &quot;favorites&quot;:[&quot;Daft Punk&quot;, &quot;Radiohead&quot;]}&#x27;</span>) <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-string">&#x27;name&#x27;</span> <span class="hljs-operator">-</span><span class="hljs-operator">&gt;&gt;</span> <span class="hljs-string">&#x27;first&#x27;</span>;
</code></pre><p>-&gt;&gt; lets you get the actual value out and not JSON. Use it for your last extraction to acutally get the data out.</p>
</div><div class="lesson-links"><a href="/lessons/json/sqlite-extensions" class="prev">← Previous</a><a href="/lessons/json/jsonb" class="next">Next →</a></div></div><div class="details-bg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="154" height="154" viewBox="0 0 154 154"><defs><clipPath id="clip-path"><rect id="Rectangle_2238" data-name="Rectangle 2238" width="154" height="154" transform="translate(9467 350)" fill="#fff" stroke="#707070" stroke-width="1"></rect></clipPath><clipPath id="clip-corner-image-active"><rect width="154" height="154"></rect></clipPath></defs><g id="corner-image-active" clip-path="url(#clip-corner-image-active)"><g id="Corner-image-active-2" data-name="Corner-image-active" transform="translate(-9467 -350)" clip-path="url(#clip-path)"><path id="Subtraction_34" data-name="Subtraction 34" d="M-3857.365,1740.766h0l-7.07-7.07,12.89-12.89v14.142l-5.818,5.818Zm-14.142-14.142h0l-7.071-7.07,27.033-27.033v14.143l-19.96,19.96Zm-14.143-14.143h0l-7.07-7.069,41.175-41.175v14.142Zm-14.142-14.142h0l-7.07-7.069,55.317-55.317v14.142Zm-14.142-14.142h0l-7.07-7.069,69.459-69.459v14.142Zm-14.142-14.142h0l-7.07-7.069,76.739-76.739h6.862v7.28Zm-14.143-14.143h0l-7.07-7.069,62.6-62.6h14.142Zm-14.142-14.142h0l-7.07-7.069,48.454-48.454h14.142Zm-14.142-14.142h0l-7.07-7.069,34.312-34.312h14.142Zm-14.142-14.142h0l-7.07-7.069,20.17-20.17h14.142Zm-14.142-14.142h0l-7.071-7.071,6.027-6.027h14.144l-13.1,13.1Zm367.24-56.114v-.909l.455.455-.453.453Z" transform="translate(13472.546 -1236.766)" fill="var(--corner-fill)"></path></g></g></svg></div></div></div></div><script async="" defer="" src="https://a.holt.courses/latest.js"></script><noscript><img src="https://a.holt.courses/noscript.gif" alt="" referrerPolicy="no-referrer-when-downgrade"/></noscript><footer class="footer"><ul class="socials"><li class="social"><a href="https://twitter.com/holtbt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="40" height="32" viewBox="0 0 40 32"><defs><clipPath id="clip-twitter-social"><rect width="40" height="32"></rect></clipPath></defs><g id="twitter-social" clip-path="url(#clip-twitter-social)"><g id="Group_269" data-name="Group 269" transform="translate(-230.23 -1140.849)"><path id="Path_419" data-name="Path 419" d="M266.12,1148.861v1.035a23.092,23.092,0,0,1-1.507,8.1,24.08,24.08,0,0,1-4.475,7.381,22.175,22.175,0,0,1-7.306,5.4,24.129,24.129,0,0,1-10,2.07,23.7,23.7,0,0,1-6.667-.945,22.83,22.83,0,0,1-5.936-2.655q.959.091,1.963.09a16.518,16.518,0,0,0,5.434-.9,17.111,17.111,0,0,0,4.749-2.52,8.275,8.275,0,0,1-4.749-1.643,7.8,7.8,0,0,1-2.877-3.983,8.268,8.268,0,0,0,1.507.135,8.58,8.58,0,0,0,2.146-.27,8.16,8.16,0,0,1-5.685-4.344,8.326,8.326,0,0,1-.89-3.578v-.135a7.775,7.775,0,0,0,3.744,1.035,8.183,8.183,0,0,1-2.671-2.9,7.817,7.817,0,0,1-.982-3.848,7.948,7.948,0,0,1,1.1-4.05,23.53,23.53,0,0,0,16.895,8.46,9.221,9.221,0,0,1-.183-1.845,7.787,7.787,0,0,1,1.1-4.05,8.216,8.216,0,0,1,2.991-2.948,7.991,7.991,0,0,1,4.087-1.1,8.184,8.184,0,0,1,5.982,2.566,16.087,16.087,0,0,0,5.205-1.98,7.784,7.784,0,0,1-1.393,2.588,8.4,8.4,0,0,1-2.215,1.913,16.856,16.856,0,0,0,4.749-1.305A17.032,17.032,0,0,1,266.12,1148.861Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><a href="https://github.com/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-github-social"><rect width="32" height="32"></rect></clipPath></defs><g id="github-social" clip-path="url(#clip-github-social)"><g id="Group_272" data-name="Group 272" transform="translate(13522.5 -6994)"><path id="Subtraction_33" data-name="Subtraction 33" d="M-24967.5,8041a15.9,15.9,0,0,1-11.312-4.688A15.893,15.893,0,0,1-24983.5,8025a15.893,15.893,0,0,1,4.689-11.315A15.894,15.894,0,0,1-24967.5,8009a15.894,15.894,0,0,1,11.313,4.686A15.893,15.893,0,0,1-24951.5,8025a15.893,15.893,0,0,1-4.689,11.313A15.9,15.9,0,0,1-24967.5,8041Zm-3.781-4.571h0v3.918h7.895v-6.665a1.836,1.836,0,0,0-1.2-1.718c5.1-.617,7.467-2.975,7.467-7.424a7.176,7.176,0,0,0-1.637-4.728,6.74,6.74,0,0,0,.275-1.812,4.34,4.34,0,0,0-.52-2.452.574.574,0,0,0-.359-.1c-1.061,0-3.465,1.411-3.936,1.694a16.644,16.644,0,0,0-4.2-.489,16.379,16.379,0,0,0-3.969.445c-.846-.5-2.91-1.649-3.859-1.649a.566.566,0,0,0-.354.095,4.3,4.3,0,0,0-.521,2.452,6.7,6.7,0,0,0,.244,1.718,7.346,7.346,0,0,0-1.6,4.822,7.263,7.263,0,0,0,1.533,4.985c1.193,1.359,3.115,2.165,5.871,2.464a1.826,1.826,0,0,0-1.129,1.693v.5h0l-.006,0a7.121,7.121,0,0,1-2.033.363,2.608,2.608,0,0,1-.965-.158,4.438,4.438,0,0,1-1.836-1.881,2.361,2.361,0,0,0-1.248-1.091,3.472,3.472,0,0,0-1.217-.3.584.584,0,0,0-.545.224.282.282,0,0,0,.027.367,1.875,1.875,0,0,0,.447.307,4.732,4.732,0,0,1,.561.355,10.726,10.726,0,0,1,1.682,2.755c.043.092.078.163.105.217a3.876,3.876,0,0,0,2.42,1.185,6.036,6.036,0,0,0,.607.025c.875,0,1.988-.124,2-.125Z" transform="translate(11461 -1015)" fill="var(--footer-icons)"></path><g id="Ellipse_670" data-name="Ellipse 670" transform="translate(-13522.5 6994)" fill="none" stroke="var(--footer-icons)" stroke-width="1"><circle cx="16" cy="16" r="16" stroke="none"></circle><circle cx="16" cy="16" r="15.5" fill="none"></circle></g></g></g></svg></a></li><li class="social"><a href="https://linkedin.com/in/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-linkedin-social"><rect width="32" height="32"></rect></clipPath></defs><g id="linkedin-social" clip-path="url(#clip-linkedin-social)"><g id="Group_270" data-name="Group 270" transform="translate(-86.349 -633.073)"><path id="Path_375" data-name="Path 375" d="M115.789,633.073a2.324,2.324,0,0,1,1.682.676,2.194,2.194,0,0,1,.695,1.627V662.8a2.131,2.131,0,0,1-.695,1.609,2.314,2.314,0,0,1-1.646.659H88.69a2.307,2.307,0,0,1-1.646-.659,2.128,2.128,0,0,1-.695-1.609V635.376a2.19,2.19,0,0,1,.695-1.627,2.322,2.322,0,0,1,1.682-.676h27.063Zm-20.224,9.672a2.561,2.561,0,0,0,0-3.584,2.658,2.658,0,0,0-1.938-.712,2.724,2.724,0,0,0-1.957.712,2.371,2.371,0,0,0-.75,1.792,2.4,2.4,0,0,0,.731,1.792,2.605,2.605,0,0,0,1.9.713h.037A2.7,2.7,0,0,0,95.565,642.745ZM96,645.434H91.213V659.88H96Zm17.3,6.144a7.007,7.007,0,0,0-1.573-4.9,5.68,5.68,0,0,0-6.839-.769,5.663,5.663,0,0,0-1.426,1.573v-2.048H98.674q.036.841,0,7.717v6.728h4.791V651.8a3.592,3.592,0,0,1,.146-1.17,2.913,2.913,0,0,1,.878-1.206,2.429,2.429,0,0,1,1.609-.549,2.108,2.108,0,0,1,1.865.914,4.265,4.265,0,0,1,.549,2.341v7.752H113.3Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><div class="terms"><p>Content Licensed Under CC-BY-NC-4.0</p><p>Code Samples and Excercises Licensed Under Apache 2.0</p><p>Site Designed by<!-- --> <a href="https://www.alexdanielson.com/">Alex Danielson</a></p></div></li></ul></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"attributes":{"title":"JSON"},"html":"\u003cp\u003eThe JSON extension (\u003ca href=\"https://sqlite.org/json1.html\"\u003ejson1\u003c/a\u003e) for SQLite is the most useful one to me, and one that I load nearly any time I do a project with SQLite. It is extremely useful for application development. It allows you to read and write arbitrary data. It allows you to treat SQLite essentially like a document-based database like MongoDB where you don\u0026#39;t have to define your schema up front and can do so on the fly. It allows you to have arrays inside of rows instead of having to do one-to-many relations across tables. There are still reasons you\u0026#39;d want to define schema and have relations across table, but this makes it easy for simple use cases where you don\u0026#39;t need all the SQL rigor.\u003c/p\u003e\n\u003cp\u003eLet\u0026#39;s install it.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003esqlpkg install sqlite/json1\nsqlpkg \u003cspan class=\"hljs-built_in\"\u003ewhich\u003c/span\u003e sqlite/json1 \u003cspan class=\"hljs-comment\"\u003e# copy the out output of this\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNow load your database and run this\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e.load \u003cspan class=\"hljs-operator\"\u003e/\u003c/span\u003eUsers\u003cspan class=\"hljs-operator\"\u003e/\u003c/span\u003emy\u003cspan class=\"hljs-operator\"\u003e-\u003c/span\u003e\u003cspan class=\"hljs-keyword\"\u003euser\u003c/span\u003e\u003cspan class=\"hljs-operator\"\u003e/\u003c/span\u003e.sqlpkg\u003cspan class=\"hljs-operator\"\u003e/\u003c/span\u003esqlite\u003cspan class=\"hljs-operator\"\u003e/\u003c/span\u003ejson1\u003cspan class=\"hljs-operator\"\u003e/\u003c/span\u003ejson1.dylib\n\n\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e json(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;{\u0026quot;username\u0026quot;: \u0026quot;btholt\u0026quot;, \u0026quot;favorites\u0026quot;:[\u0026quot;Daft Punk\u0026quot;, \u0026quot;Radiohead\u0026quot;]}\u0026#x27;\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis should return back to you a JSON object of the string we passed in. As you can see, we can now operate with JSON inside of SQLite! Pretty cool, right? Let\u0026#39;s try a few more.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-comment\"\u003e-- create an array\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003ejson_array\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e-- get the length of an array\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e json_array_length(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;{\u0026quot;username\u0026quot;: \u0026quot;btholt\u0026quot;, \u0026quot;favorites\u0026quot;:[\u0026quot;Daft Punk\u0026quot;, \u0026quot;Radiohead\u0026quot;]}\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;$.favorites\u0026#x27;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e-- get the type of a field in an object\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e json_type(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;{\u0026quot;username\u0026quot;: \u0026quot;btholt\u0026quot;, \u0026quot;favorites\u0026quot;:[\u0026quot;Daft Punk\u0026quot;, \u0026quot;Radiohead\u0026quot;]}\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;$.username\u0026#x27;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e-- construct a new object using pairs\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003ejson_object\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;username\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;btholt\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;favorites\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-built_in\"\u003ejson_array\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;Daft Punk\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;Radiohead\u0026#x27;\u003c/span\u003e));\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThese are a bunch of helper methods to help you interact with JSON objects in SQLite. Let\u0026#39;s see how to manipulate it.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-comment\"\u003e-- add a new field\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e json_insert(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;{\u0026quot;username\u0026quot;: \u0026quot;btholt\u0026quot;, \u0026quot;favorites\u0026quot;:[\u0026quot;Daft Punk\u0026quot;, \u0026quot;Radiohead\u0026quot;]}\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;$.city\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;Sacramento\u0026#x27;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e-- remove a field\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e json_remove(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;{\u0026quot;username\u0026quot;: \u0026quot;btholt\u0026quot;, \u0026quot;favorites\u0026quot;:[\u0026quot;Daft Punk\u0026quot;, \u0026quot;Radiohead\u0026quot;]}\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;$.favorites\u0026#x27;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e-- update a field\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e json_replace(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;{\u0026quot;username\u0026quot;: \u0026quot;btholt\u0026quot;, \u0026quot;favorites\u0026quot;:[\u0026quot;Daft Punk\u0026quot;, \u0026quot;Radiohead\u0026quot;]}\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;$.username\u0026#x27;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026#x27;holtbt\u0026#x27;\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\u003ch2\u003e-\u0026gt; and -\u0026gt;\u0026gt;\u003c/h2\u003e\n\u003cp\u003eSQLite provides two convenience operators that it copied from MySQL and Postgres to keep the syntaxes compatible. It allows you to extract specific values from JSON.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e json(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;{\u0026quot;username\u0026quot;: \u0026quot;btholt\u0026quot;, \u0026quot;favorites\u0026quot;:[\u0026quot;Daft Punk\u0026quot;, \u0026quot;Radiohead\u0026quot;]}\u0026#x27;\u003c/span\u003e) \u003cspan class=\"hljs-operator\"\u003e-\u003c/span\u003e\u003cspan class=\"hljs-operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;username\u0026#x27;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e json(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;{\u0026quot;username\u0026quot;: \u0026quot;btholt\u0026quot;, \u0026quot;name\u0026quot;: { \u0026quot;first\u0026quot;: \u0026quot;Brian\u0026quot; }, \u0026quot;favorites\u0026quot;:[\u0026quot;Daft Punk\u0026quot;, \u0026quot;Radiohead\u0026quot;]}\u0026#x27;\u003c/span\u003e) \u003cspan class=\"hljs-operator\"\u003e-\u003c/span\u003e\u003cspan class=\"hljs-operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;name\u0026#x27;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e json(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;{\u0026quot;username\u0026quot;: \u0026quot;btholt\u0026quot;, \u0026quot;name\u0026quot;: { \u0026quot;first\u0026quot;: \u0026quot;Brian\u0026quot; }, \u0026quot;favorites\u0026quot;:[\u0026quot;Daft Punk\u0026quot;, \u0026quot;Radiohead\u0026quot;]}\u0026#x27;\u003c/span\u003e) \u003cspan class=\"hljs-operator\"\u003e-\u003c/span\u003e\u003cspan class=\"hljs-operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;name\u0026#x27;\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e-\u003c/span\u003e\u003cspan class=\"hljs-operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;first\u0026#x27;\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNotice you can do multiple levels of extraction. Also notice that anything that coming back from with -\u0026gt; operator has double quotes. That\u0026#39;s because it\u0026#39;s still treating it as JSON so that we can keep using -\u0026gt; to dig further into objects. If we want it to return it as text or integer, we use -\u0026gt;\u0026gt;\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e json(\u003cspan class=\"hljs-string\"\u003e\u0026#x27;{\u0026quot;username\u0026quot;: \u0026quot;btholt\u0026quot;, \u0026quot;name\u0026quot;: { \u0026quot;first\u0026quot;: \u0026quot;Brian\u0026quot; }, \u0026quot;favorites\u0026quot;:[\u0026quot;Daft Punk\u0026quot;, \u0026quot;Radiohead\u0026quot;]}\u0026#x27;\u003c/span\u003e) \u003cspan class=\"hljs-operator\"\u003e-\u003c/span\u003e\u003cspan class=\"hljs-operator\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;name\u0026#x27;\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e-\u003c/span\u003e\u003cspan class=\"hljs-operator\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x27;first\u0026#x27;\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e-\u0026gt;\u0026gt; lets you get the actual value out and not JSON. Use it for your last extraction to acutally get the data out.\u003c/p\u003e\n","markdown":"\nThe JSON extension ([json1][json1]) for SQLite is the most useful one to me, and one that I load nearly any time I do a project with SQLite. It is extremely useful for application development. It allows you to read and write arbitrary data. It allows you to treat SQLite essentially like a document-based database like MongoDB where you don't have to define your schema up front and can do so on the fly. It allows you to have arrays inside of rows instead of having to do one-to-many relations across tables. There are still reasons you'd want to define schema and have relations across table, but this makes it easy for simple use cases where you don't need all the SQL rigor.\n\nLet's install it.\n\n```bash\nsqlpkg install sqlite/json1\nsqlpkg which sqlite/json1 # copy the out output of this\n```\n\nNow load your database and run this\n\n```sql\n.load /Users/my-user/.sqlpkg/sqlite/json1/json1.dylib\n\nSELECT json('{\"username\": \"btholt\", \"favorites\":[\"Daft Punk\", \"Radiohead\"]}');\n```\n\nThis should return back to you a JSON object of the string we passed in. As you can see, we can now operate with JSON inside of SQLite! Pretty cool, right? Let's try a few more.\n\n```sql\n-- create an array\nSELECT json_array(1, 2, 3);\n\n-- get the length of an array\nSELECT json_array_length('{\"username\": \"btholt\", \"favorites\":[\"Daft Punk\", \"Radiohead\"]}', '$.favorites');\n\n-- get the type of a field in an object\nSELECT json_type('{\"username\": \"btholt\", \"favorites\":[\"Daft Punk\", \"Radiohead\"]}', '$.username');\n\n-- construct a new object using pairs\nSELECT json_object('username', 'btholt', 'favorites', json_array('Daft Punk', 'Radiohead'));\n```\n\nThese are a bunch of helper methods to help you interact with JSON objects in SQLite. Let's see how to manipulate it.\n\n```sql\n-- add a new field\nSELECT json_insert('{\"username\": \"btholt\", \"favorites\":[\"Daft Punk\", \"Radiohead\"]}', '$.city', 'Sacramento');\n\n-- remove a field\nSELECT json_remove('{\"username\": \"btholt\", \"favorites\":[\"Daft Punk\", \"Radiohead\"]}', '$.favorites');\n\n-- update a field\nSELECT json_replace('{\"username\": \"btholt\", \"favorites\":[\"Daft Punk\", \"Radiohead\"]}', '$.username', 'holtbt');\n```\n\n## -\u003e and -\u003e\u003e\n\nSQLite provides two convenience operators that it copied from MySQL and Postgres to keep the syntaxes compatible. It allows you to extract specific values from JSON.\n\n```sql\nSELECT json('{\"username\": \"btholt\", \"favorites\":[\"Daft Punk\", \"Radiohead\"]}') -\u003e 'username';\nSELECT json('{\"username\": \"btholt\", \"name\": { \"first\": \"Brian\" }, \"favorites\":[\"Daft Punk\", \"Radiohead\"]}') -\u003e 'name';\nSELECT json('{\"username\": \"btholt\", \"name\": { \"first\": \"Brian\" }, \"favorites\":[\"Daft Punk\", \"Radiohead\"]}') -\u003e 'name' -\u003e 'first';\n```\n\nNotice you can do multiple levels of extraction. Also notice that anything that coming back from with -\u003e operator has double quotes. That's because it's still treating it as JSON so that we can keep using -\u003e to dig further into objects. If we want it to return it as text or integer, we use -\u003e\u003e\n\n```sql\nSELECT json('{\"username\": \"btholt\", \"name\": { \"first\": \"Brian\" }, \"favorites\":[\"Daft Punk\", \"Radiohead\"]}') -\u003e 'name' -\u003e\u003e 'first';\n```\n\n-\u003e\u003e lets you get the actual value out and not JSON. Use it for your last extraction to acutally get the data out.\n\n[json1]: https://sqlite.org/json1.html\n","slug":"querying","title":"JSON","section":"JSON","icon":"file-code","filePath":"/home/runner/work/complete-intro-to-sqlite/complete-intro-to-sqlite/lessons/08-json/B-querying.md","nextSlug":"/lessons/json/jsonb","prevSlug":"/lessons/json/sqlite-extensions"}},"__N_SSG":true},"page":"/lessons/[section]/[slug]","query":{"section":"json","slug":"querying"},"buildId":"UVFsG-h6A31FVwYuYsLRa","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>