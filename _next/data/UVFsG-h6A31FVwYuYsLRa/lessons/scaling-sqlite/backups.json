{"pageProps":{"post":{"attributes":{},"html":"<p>A lot of fantastic tooling has been built around SQLite, and in the spirit of the project they&#39;ve been made straightforward and &quot;lite.&quot; One of the most interesting ones in my opinion is <a href=\"https://litestream.io/\">Litestream</a>. It allows you with very little effort to be able to stream point-in-time backups to somewhere else. This can be incredibly useful as this provides some security that if you have a bad query wipe out data you can restore it from an earlier version.</p>\n<p>We&#39;re going to quickly set this up using Docker. This isn&#39;t a Docker course so just stick with me. If you want to more about Docker, I teach a <a href=\"https://frontendmasters.com/teachers/brian-holt/\">pretty cool course on it for Frontend Masters</a> as well. If you like this course, I try to take the same approach to demystifying containers.</p>\n<p>We&#39;re going to be using <a href=\"https://min.io/\">MinIO</a> to stream our backups too. You can think of MinIO like a mini <a href=\"https://aws.amazon.com/s3/\">AWS S3</a> bucket that runs on your computer.</p>\n<p>Make sure that you have <a href=\"https://litestream.io/install/\">Litestream</a> and <a href=\"https://www.docker.com/products/docker-desktop/\">Docker</a> installed.</p>\n<p>Now let&#39;s get our MinIO container running.</p>\n<pre><code class=\"hljs language-bash\">docker run -p 9000:9000 -p 9001:9001 minio/minio server /data --console-address <span class=\"hljs-string\">&quot;:9001&quot;</span>\n</code></pre><p>Next go to your local instance of MinIO running at <a href=\"\">http://localhost:9001/</a> and log in with the default username and password, minioadmin / minioadmin.</p>\n<p>Click the &quot;Create Bucket&quot; and call it &quot;chinook-backup&quot;. Click into the bucket and make sure it&#39;s set to be &quot;Public&quot; instead of &quot;Private&quot;.</p>\n<p>Next, from where-ever your database folder is, run</p>\n<pre><code class=\"hljs language-bash\"><span class=\"hljs-built_in\">export</span> LITESTREAM_ACCESS_KEY_ID=minioadmin\n<span class=\"hljs-built_in\">export</span> LITESTREAM_SECRET_ACCESS_KEY=minioadmin\n\n<span class=\"hljs-comment\"># be sure to replace data.db with something else if you called the file something else</span>\nlitestream replicate data.db s3://chinook-backup.localhost:9000/data.db\n</code></pre><p>DONE! You are now streaming your backups to the bucket. As you can imagine, instead of a local MinIO bucket, you can stream it to a cloud bucket like S3 or Azure Blob Storage. Backing up SQLite is as easy as that!</p>\n<p>Let&#39;s go ahead and do a restore!</p>\n<pre><code class=\"hljs language-bash\"><span class=\"hljs-built_in\">export</span> LITESTREAM_ACCESS_KEY_ID=minioadmin\n<span class=\"hljs-built_in\">export</span> LITESTREAM_SECRET_ACCESS_KEY=minioadmin\nlitestream restore -o data2.db s3://chinook-backup.localhost:9000/data.db\n</code></pre><p>And just like that we were able to pull down the most recent copy of your data, no problem.</p>\n","markdown":"A lot of fantastic tooling has been built around SQLite, and in the spirit of the project they've been made straightforward and \"lite.\" One of the most interesting ones in my opinion is [Litestream][litestream]. It allows you with very little effort to be able to stream point-in-time backups to somewhere else. This can be incredibly useful as this provides some security that if you have a bad query wipe out data you can restore it from an earlier version.\n\nWe're going to quickly set this up using Docker. This isn't a Docker course so just stick with me. If you want to more about Docker, I teach a [pretty cool course on it for Frontend Masters][containers] as well. If you like this course, I try to take the same approach to demystifying containers.\n\nWe're going to be using [MinIO][minio] to stream our backups too. You can think of MinIO like a mini [AWS S3][s3] bucket that runs on your computer.\n\nMake sure that you have [Litestream][install] and [Docker][docker] installed.\n\nNow let's get our MinIO container running.\n\n```bash\ndocker run -p 9000:9000 -p 9001:9001 minio/minio server /data --console-address \":9001\"\n```\n\nNext go to your local instance of MinIO running at [http://localhost:9001/]() and log in with the default username and password, minioadmin / minioadmin.\n\nClick the \"Create Bucket\" and call it \"chinook-backup\". Click into the bucket and make sure it's set to be \"Public\" instead of \"Private\".\n\nNext, from where-ever your database folder is, run\n\n```bash\nexport LITESTREAM_ACCESS_KEY_ID=minioadmin\nexport LITESTREAM_SECRET_ACCESS_KEY=minioadmin\n\n# be sure to replace data.db with something else if you called the file something else\nlitestream replicate data.db s3://chinook-backup.localhost:9000/data.db\n```\n\nDONE! You are now streaming your backups to the bucket. As you can imagine, instead of a local MinIO bucket, you can stream it to a cloud bucket like S3 or Azure Blob Storage. Backing up SQLite is as easy as that!\n\nLet's go ahead and do a restore!\n\n```bash\nexport LITESTREAM_ACCESS_KEY_ID=minioadmin\nexport LITESTREAM_SECRET_ACCESS_KEY=minioadmin\nlitestream restore -o data2.db s3://chinook-backup.localhost:9000/data.db\n```\n\nAnd just like that we were able to pull down the most recent copy of your data, no problem.\n\n[litestream]: https://litestream.io/\n[containers]: https://frontendmasters.com/teachers/brian-holt/\n[minio]: https://min.io/\n[s3]: https://aws.amazon.com/s3/\n[install]: https://litestream.io/install/\n[docker]: https://www.docker.com/products/docker-desktop/\n","slug":"backups","title":"Backups","section":"Scaling SQLite","icon":"server","filePath":"/home/runner/work/complete-intro-to-sqlite/complete-intro-to-sqlite/lessons/09-scaling-sqlite/A-backups.md","nextSlug":"/lessons/scaling-sqlite/replication","prevSlug":"/lessons/json/more-advance-queries"}},"__N_SSG":true}